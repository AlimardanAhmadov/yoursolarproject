$(document).on("click",".btn-next",function(t){t.preventDefault();var e=$(this),a=e.data("href"),l=e.data("next-page"),o=document.querySelectorAll(".step");if(e.html('<div class="lds-ring" style="margin: 6px 12px;height: 10px;"><div></div><div></div><div></div><div></div></div>'),$(".lds-ring div").css({width:"12px",height:"12px"}),a&&!$(".form__error.active").length){var s=new URL(window.location);s.searchParams.set("name",a),l&&s.searchParams.set("page",l),window.history.pushState({},"",s),$("html, body").animate({scrollTop:0},"fast")}a&&!$(".form__error.active").length&&o.forEach(function(t,e){t.dataset.step==a&&(o[e-1].classList.remove("active"),o[e-1].className+=" step-completed",t.classList.add("active"))}),e.is("#validatePersonalInfo")?validatePersonalInformation():e.is("#validateElectricityBill")?validateElectricityBill():e.is("#validateInstallationType")?validateInstallationType():e.is("#validateRoofStyle")?validateRoofStyle():e.is("#confirmSelectedPanel")?confirmSelectedPanel():e.is("#confirmSelectedFitting")?confirmSelectedFitting():e.is("#confirmSelectedInverter")?confirmSelectedInverter():e.is("#validateCableLength")?validateCableLength():e.is("#confirmInvBatteryLength")?confirmInvBatteryLength():e.is("#confirmStorageCable")?confirmStorageCable():e.is("#validateRoofDimensions")&&validateRoofDimensions(),setTimeout(function(){$(".form__error").fadeOut("slow"),$(".form__error").removeClass("active")},1e4)}),$(document).on("click",".skip-btn",function(){var t=$(this),e=t.data("href"),a=t.data("skip"),l=t.data("next-page"),o=document.querySelectorAll(".step");if(e){var s=new URL(window.location);s.searchParams.set("name",e),s.searchParams.set("page",l),window.history.pushState({},"",s),$("html, body").animate({scrollTop:0},"fast")}e&&!$(".form__error.active").length&&o.forEach(function(t,a){t.dataset.step==e&&(o[a-1].className+=" step-completed",t.classList.add("active"))}),$.get("/templates/quote/quote_pages/"+a+".html",function(t){$("#content").html(t)},"html")}),$(document).on("click",".btn-back",function(){var t=$(this),e=t.data("href"),a=t.data("back"),l=new URL(window.location),o=document.querySelectorAll(".step");e&&(l.searchParams.set("name",e),l.searchParams.set("page",a),window.history.pushState({},"",l),$(".form__error.active").length||o.forEach(function(t,a){t.dataset.step==e&&(0!=a&&o[a-1].classList.remove("active"),o[a+1].classList.remove("active"),t.classList.add("active"))})),l.href.includes("section?name")&&"parts"!=l.searchParams.get("page")&&"storage-system-size"!=l.searchParams.get("page")&&"extra-help"!=l.searchParams.get("page")?$.get("/templates/quote/quote_pages/"+a+".html",function(t){$("#content").html(t)},"html"):"storage-system-size"==l.searchParams.get("page")||"extra-help"==l.searchParams.get("page")?loadObjects():"parts"==l.searchParams.get("page")&&loadProducts()}),$(document).on("click",".choice-card, .product-choice",function(){$(".choice-card").removeClass("selected"),$(".product-choice").removeClass("selected"),$(this).addClass("selected")}),$(document).on("submit",".quote-sections form",function(t){t.preventDefault()}),$(document).on("click","#installation__type .choice-card",function(){var t=$(this).find(".choice-text"),e=new URL(window.location);if("Roof"==t.text())e.searchParams.set("page","single-phase"),$.get("/templates/quote/quote_pages/single-phase.html",function(t){$("#content").html(t)},"html");else if("Standalone"==t.text()){var e=new URL(window.location);e.searchParams.set("page","standalone-installation"),$.get("/templates/quote/quote_pages/standalone-installation.html",function(t){$("#content").html(t)},"html")}window.history.pushState({},"",e)}),$(document).on("click","#standalone__installation .choice-card",function(){"Campervan"==$(this).find(".choice-text").text()?$("#content").html('<div class="page-title-wrap text-center"><h4 class="sub-title">Please see the campervan bundles in our shop</h4></div><div class="btn-group-footer"><a data-back="standalone-installation" type="button" class="btn primary-btn btn-back"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"></path></svg>Back</a></div>'):$("#content").html('<div class="page-title-wrap text-center"><h4 class="sub-title">Please call us directly on 08000016802</h4><a href="{% url "shop" %}" type="button" class="btn button-black" style="width: 150px;margin: 2rem auto auto;">Shop</a></div><div class="btn-group-footer"><a data-back="standalone-installation" type="button" class="btn primary-btn btn-back"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"></path></svg>Back</a></div>')}),$(document).on("click","#singlePhase button",function(){if("No"==$(this).text())$("#content").html('<div class="page-title-wrap text-center"><h4 class="sub-title">Please call us directly on 08000016802</h4></div><div class="btn-group-footer"><a data-back="single-phase" type="button" class="btn primary-btn btn-back"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"></path></svg>Back</a></div>'),$(".toolbar__section-middle .btn-next").html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');else{var t=new URL(window.location);t.searchParams.set("page","spare-way"),window.history.pushState({},"",t),$.get("/templates/quote/quote_pages/spare-way.html",function(t){$("#content").html(t)},"html")}}),$(document).on("click","#spareWay button",function(){var t=$(this),e=new URL(window.location);"No"==t.text()?($("#content").html('<div class="page-title-wrap text-center"><h4 class="sub-title">Please call us directly on 08000016802</h4></div><div class="btn-group-footer"><a data-back="single-phase" type="button" class="btn primary-btn btn-back"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"></path></svg>Back</a></div>'),$(".toolbar__section-middle .btn-next").html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>')):(e.searchParams.set("page","roof-style"),window.history.pushState({},"",e),$.get("/templates/quote/quote_pages/roof-style.html",function(t){$("#content").html(t)},"html"))}),$(document).on("click","#storageSystem button",function(){var t=$(this),e=new URL(window.location);"Yes"==t.text()?(e.searchParams.set("page","storage-system-size"),window.history.pushState({},"",e),loadObjects()):(localStorage.getItem("storage_system")&&localStorage.removeItem("storage_system"),e.searchParams.set("page","extra-help"),window.history.pushState({},"",e),loadObjects())}),$(document).on("click","#extraRequiremet button",function(t){t.preventDefault(),$(".prp-btn").click()}),$(document).on("click","#concludeQuote, #extraRequiremet button",function(t){t.preventDefault(),$("#content").html('<div class="text"><h2><span class="words-wrapper"><b class="is-visible">We are working on it, give us a minute...</b><b>Setting up stuff...</b><b>Getting things ready...</b><b>Almost done...</b></span><h2></div>'),$(this).hasClass("primary-btn")&&localStorage.setItem("extra_service",$(this).data("id"));var e={full_name:localStorage.getItem("fullnameField"),address:localStorage.getItem("addressField"),postcode:localStorage.getItem("postcodeField"),email:localStorage.getItem("emailField"),property_type:localStorage.getItem("housetypeField"),no_floors:localStorage.getItem("nofloorsField"),no_bedrooms:localStorage.getItem("nobedroomsField"),phone:localStorage.getItem("phoneField"),bill_rate:localStorage.getItem("billrateField"),roof_style:localStorage.getItem("roof_style"),roof_width:localStorage.getItem("widthField"),roof_height:localStorage.getItem("heightField"),panels_count:localStorage.getItem("quantity"),selected_panel:localStorage.getItem("panel_slug"),fitting:localStorage.getItem("fitting_slug"),inverter:localStorage.getItem("inverter_slug"),rail:localStorage.getItem("inverter_slug"),cable_length_panel_cons:localStorage.getItem("fattened_consumer_cable_length"),cable_length_bat_inv:localStorage.getItem("fattened_cable_length"),storage_cable:localStorage.getItem("fattened_storage_cable_length"),storage_system:localStorage.getItem("storage_system"),extra_service:localStorage.getItem("extra_service")};$.post({type:"POST",url:"/build-quote/section",data:JSON.stringify(e),dataType:"json",headers:{"X-CSRFTOKEN":csrftoken,"Content-type":"application/json"},success:function(t){var e="/quote/"+t.redirect_url;console.log(e),setTimeout(function(){window.location.href=e,localStorage.removeItem("extra_service")},1e3)},error:function(t,e,a){console.log("not working")}})});const quote_url="/upload-products/",object_url="/upload-objects/",content=$("#content"),delay_100_ms=100,ajax_func=function(t,e){$.getJSON(t,e).done(t=>{setTimeout(function(){content.html(t.html_from_view)},100)})},load_func=function(t,e){$.getJSON(t,e).done(t=>{setTimeout(function(){content.html(t.html_from_view)},100)})};function loadProducts(){var t=new URL(window.location);let e={product_type:t.searchParams.get("name"),slug:localStorage.getItem("panel_slug"),roof_type:localStorage.getItem("roof_style")};$("#content").html('<div class="lds-ellipsis" style="display: flex;-webkit-box-pack: center;justify-content: center;margin: auto;"><div></div><div></div><div></div><div></div></div>'),scheduled_function&&clearTimeout(scheduled_function),scheduled_function=setTimeout(ajax_func,100,"/upload-products/",e)}function loadObjects(){var t=new URL(window.location);let e={object_type:t.searchParams.get("page")};$("#content").html('<div class="lds-ellipsis" style="display: flex;-webkit-box-pack: center;justify-content: center;margin: auto;"><div></div><div></div><div></div><div></div></div>'),scheduled_function&&clearTimeout(scheduled_function),scheduled_function=setTimeout(load_func,100,"/upload-objects/",e)}function updateCurrentSection(){var t=new URL(window.location);if(!t.href.includes("build-quote")||t.href.includes("page")&&t.href.includes("section?name")){if("summary"==t.searchParams.get("page"))$(".quote-builder-container").html('<div class="lds-ellipsis" style="display: flex;-webkit-box-pack: center;justify-content: center;margin: auto;"><div></div><div></div><div></div><div></div></div>'),setTimeout(function(){$.get("/templates/quote/quote_pages/summary.html",function(t){$(".quote-builder-container").html(t)},"html")},delay_by_in_ms);else if("parts"==t.searchParams.get("page"))loadProducts();else if("storage-system-size"==t.searchParams.get("page")||"extra-help"==t.searchParams.get("page"))loadObjects();else if(t.href.includes("section?name")&&"parts"!=t.searchParams.get("page")){$("#content").html('<div class="lds-ellipsis" style="display: flex;-webkit-box-pack: center;justify-content: center;margin: auto;"><div></div><div></div><div></div><div></div></div>');var e="/templates/quote/quote_pages/"+t.searchParams.get("page")+".html";setTimeout(function(){$.get(e,function(t){$("#content").html(t)},"html")},delay_by_in_ms)}else"Summary"==t.searchParams.get("page")&&($("#content").html('<div class="lds-ellipsis" style="display: flex;-webkit-box-pack: center;justify-content: center;margin: auto;"><div></div><div></div><div></div><div></div></div>'),setTimeout(function(){$.get("/templates/quote/quote_pages/summary.html",function(t){$(".quote-builder").html(t)},"html")},delay_by_in_ms))}else t.searchParams.set("name","Personal Information"),t.searchParams.set("page","personal-information"),window.history.pushState({},"",t),$("#content").html('<div class="lds-ellipsis" style="display: flex;-webkit-box-pack: center;justify-content: center;margin: auto;"><div></div><div></div><div></div><div></div></div>'),setTimeout(function(){$.get("/static/quote_pages/personal-information.html",function(t){$("#content").html(t)},"html")},delay_by_in_ms);var a=$('.step[data-step="'+t.searchParams.get("name")+'"');$(a).addClass("active"),$(a).prevAll(".step").addClass("step-completed").removeClass("active")}function displayError(){$(".form__error").fadeIn("slow"),$(".form__error").css("display","flex"),$(".form__error").addClass("active")}function validateEmail(t){return/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/.test(t)}function validatePersonalInformation(){if($("#housetypeField").val()){if($("#nobedroomsField").val()){if($("#nofloorsField").val()){if($("input[name='agreement']").is(":checked")){if(validateEmail($('input[name="email"]').val())){document.querySelectorAll("input").forEach(function(t,e){localStorage.setItem(t.id,t.value)});var t=new URL(window.location);t.searchParams.set("name","monthly-bill-rate"),t.searchParams.set("page","bill-rate"),window.history.pushState({},"",t),$.get("/templates/quote/quote_pages/bill-rate.html",function(t){$("#content").html(t)},"html")}else displayError(),$(".error__content").html("You have entered an invalid email address!"),$(".toolbar__section-middle .btn-next").html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>')}else displayError(),$(".error__content").html("You must agree to Solar Panels Terms of Service, including the User Agreement and Privacy Policy."),$(".toolbar__section-middle .btn-next").html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>')}else displayError(),$(".error__content").html("Number of floors: This field cannot be blank"),$(".toolbar__section-middle .btn-next").html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>')}else displayError(),$(".error__content").html("Number of bedrooms: This field cannot be blank"),$(".toolbar__section-middle .btn-next").html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>')}else displayError(),$(".error__content").html("Type of house: This field cannot be blank"),$(".toolbar__section-middle .btn-next").html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>')}function validateElectricityBill(){if(0>=parseInt($("#billrateField").val()))displayError(),$(".error__content").html("Amount cannot be less than or equal to 0 USD"),$(".toolbar__section-middle .btn-next").html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');else{var t=document.getElementById("billrateField");localStorage.setItem(t.id,t.value);var e=new URL(window.location);e.searchParams.set("page","installation-type"),window.history.pushState({},"",e),$.get("/templates/quote/quote_pages/installation-type.html",function(t){$("#content").html(t)},"html")}}function validateInstallationType(){if($(".choice-card.selected").length){var t=new URL(window.location);if("Standalone"==$(".choice-card.selected .choice-text").text())t.searchParams.set("page","single-phase"),$.get("/templates/quote/quote_pages/standalone-installation.html",function(t){$("#content").html(t)},"html");else if("Roof"==$(".choice-card.selected .choice-text").text()){t.searchParams.set("page","standalone-installation");var e=$(".choice-card.selected .choice-text").text();localStorage.setItem("installation_type",e),$.get("/templates/quote/quote_pages/single-phase.html",function(t){$("#content").html(t)},"html")}window.history.pushState({},"",t)}else displayError(),$(".error__content").html("You should choose one of the options"),$(".toolbar__section-middle .btn-next").html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>')}function validateRoofStyle(){if($(".choice-card.selected").length){var t=$(".choice-card.selected .choice-text").text();localStorage.setItem("roof_style",t);var e=new URL(window.location);e.searchParams.set("page","roof-dimensions"),window.history.pushState({},"",e),$.get("/templates/quote/quote_pages/roof-dimensions.html",function(t){$("#content").html(t)},"html")}else displayError(),$(".error__content").html("You should choose one of the options"),$(".toolbar__section-middle .btn-next").html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>')}function validateRoofDimensions(){if($("#widthField").val()){if($("#heightField").val()){if(0>=parseInt($("#heightField").val()))displayError(),$(".error__content").html("Roof's height cannot be less than or equal to zero"),$(".toolbar__section-middle .btn-next").html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');else if(0>=parseInt($("#widthField").val()))displayError(),$(".error__content").html("Roof's width cannot be less than or equal to zero"),$(".toolbar__section-middle .btn-next").html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');else{document.querySelectorAll("input").forEach(function(t,e){localStorage.setItem(t.id,t.value)});var t=new URL(window.location);t.searchParams.set("name","Panel"),t.searchParams.set("page","parts"),window.history.pushState({},"",t),loadProducts()}}else displayError(),$(".error__content").html("This field cannot be blank"),$(".toolbar__section-middle .btn-next").html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>')}else displayError(),$(".error__content").html("This field cannot be blank"),$(".toolbar__section-middle .btn-next").html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>')}function validateCableLength(){if($("#cablelengthField").val()){if(0>=parseInt($("#cablelengthField").val()))displayError(),$(".error__content").html("Invalid length value!"),$(".toolbar__section-middle .btn-next").html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');else{var t=new URL(window.location);t.searchParams.set("name","Storage System"),t.searchParams.set("page","storage-system"),window.history.pushState({},"",t),$.get("/templates/quote/quote_pages/storage-system.html",function(t){$("#content").html(t)},"html")}}else displayError(),$(".error__content").html("This field cannot be blank"),$(".toolbar__section-middle .btn-next").html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>')}function possibleMaxPanels(){var t,e=Math.round(parseFloat($("#panel-height").text())),a=Math.round(parseFloat($("#panel-width").text())),l=Math.round(parseFloat(localStorage.getItem("widthField")));return Math.round(Math.round(parseFloat(localStorage.getItem("heightField")))/e*(l/a))}function confirmSelectedPanel(){if($('input[name="panels_count"]').val()>$(".quantity-input").attr("max"))displayError(),$(".error__content").html("You cannot order more than the maximum quantity");else if($('input[name="panels_count"]').val()>possibleMaxPanels())displayError(),$(".error__content").html("Based on your roof dimensions, max amount of panels you can order is "+possibleMaxPanels());else{var t=$(".product-choice.selected").data("slug"),e=$(".quantity-input").val();localStorage.setItem("panel_slug",t),localStorage.setItem("quantity",e);var a=new URL(window.location);a.searchParams.set("name","Fitting"),a.searchParams.set("page","parts"),window.history.pushState({},"",a),loadProducts()}}function confirmSelectedFitting(){var t=$(".product-choice").data("slug");localStorage.setItem("fitting_slug",t);var e=new URL(window.location);e.searchParams.set("name","Inverter"),e.searchParams.set("page","parts"),window.history.pushState({},"",e),loadProducts()}function confirmSelectedInverter(){if($(".product-choice.selected").length){var t=$(".product-choice").data("slug");localStorage.setItem("inverter_slug",t);var e=new URL(window.location);e.searchParams.set("page","Storage System"),e.searchParams.set("page","cable-length"),window.history.pushState({},"",e),$.get("/templates/quote/quote_pages/cable-length.html",function(t){$("#content").html(t)},"html")}else displayError(),$(".error__content").html("You should choose an inverter"),$(".toolbar__section-middle .btn-next").html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>')}function confirmInvBatteryLength(){if(0>=parseInt($("#cablelengthbtoinvField").val()))displayError(),$(".error__content").html("Invalid length value!"),$(".toolbar__section-middle .btn-next").html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');else if($("#cablelengthbtoinvField").val().length){var t=new URL(window.location);t.searchParams.set("page","storage-cable"),window.history.pushState({},"",t),$.get("/templates/quote/quote_pages/storage-cable.html",function(t){$("#content").html(t)},"html")}else displayError(),$(".error__content").html("This field cannot be blank!"),$(".toolbar__section-middle .btn-next").html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>')}function confirmStorageCable(){if(0>=parseInt($("#storagecableField").val()))displayError(),$(".error__content").html("Invalid length value!"),$(".toolbar__section-middle .btn-next").html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');else if($("#storagecableField").val().length){var t=document.getElementById("storagecableField");localStorage.setItem(t.id,t.value);var e=parseFloat(t.value)+parseFloat(.2*t.value);localStorage.setItem("fattened_storage_cable_length",e);var a=new URL(window.location);a.searchParams.set("page","extra-help"),window.history.pushState({},"",a),loadObjects()}else displayError(),$(".error__content").html("This field cannot be blank"),$(".toolbar__section-middle .btn-next").html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>')}$(document).on("click",".step.step-completed",function(t){t.preventDefault();var e=new URL(window.location),a=$(this),l=$(".step.step-completed").last();l.next().removeClass("active"),l.prevAll().removeClass("active"),a.nextAll(".step-completed").removeClass("active"),a.prevAll(".step").removeClass("active"),a.addClass("active"),e.searchParams.set("name",a.data("step")),e.searchParams.set("page",a.data("page")),window.history.pushState({},"",e),updateCurrentSection()}),$(window).on("load popstate hashchange",function(){new URL(window.location).href.includes("build-quote/section")&&updateCurrentSection()}),$(document).on("DOMSubtreeModified","#content",function(){document.querySelectorAll(".section input").forEach(function(t,e){var a=localStorage.getItem(t.id);a&&(document.getElementById(t.id).value=a)})}),$(document).on("DOMNodeInserted",".card-list",function(){document.querySelectorAll(".product-choice").forEach(function(t,e){var a=localStorage.getItem("panel_slug"),l=localStorage.getItem("fitting_slug"),o=localStorage.getItem("inverter_slug");(t.dataset.slug==a||t.dataset.slug==l||t.dataset.slug==o)&&t.classList.add("selected")})}),$(document).on("change","#cablelengthField",function(){var t=$(this),e=t.val();localStorage.setItem(t.attr("id"),e);var a=parseFloat(e)+parseFloat(.2*e);localStorage.setItem("fattened_consumer_cable_length",a)}),$(document).on("click","#storageSystemSize button",function(){var t=$(this),e=new URL(window.location);e.searchParams.set("name","Cable Length from Battery to Inverter"),e.searchParams.set("page","cable-length-battery-inverter"),window.history.pushState({},"",e),localStorage.setItem("storage_system",t.data("slug")),$.get("/templates/quote/quote_pages/cable-length-battery-inverter.html",function(t){$("#content").html(t)},"html")}),$(document).on("change","#cablelengthbtoinvField",function(){var t=$(this),e=t.val();localStorage.setItem(t.attr("id"),e);var a=parseFloat(e)+parseFloat(.2*e);localStorage.setItem("fattened_cable_length",a)}),$(document).on("click",".quote-builder .modal-btn",function(t){t.preventDefault();var e=$(this),a=$(".product-choice.selected").data("slug");$(this).html('<div class="lds-ring"><div></div><div></div><div></div><div></div></div>'),$.ajax({type:"GET",url:"/variant-details/"+a,dataType:"json",headers:{"X-CSRFTOKEN":csrftoken,"Content-type":"application/json"},success:function(t){e.html("Choose Panel"),$(".modal-window").css({visibility:"visible",opacity:1,"pointer-events":"auto"}),$(".modal-content").html('<div class="lds-ellipsis" style="display: flex;-webkit-box-pack: center;justify-content: center;margin: auto;"><div></div><div></div><div></div><div></div></div>'),setTimeout(function(){$(".modal-content").html(t.html_from_view)},delay_by_in_ms)},error:function(){e.html("Choose Panel")}})}),$(document).on("click",".step-btn",function(){var t=$(this),e=t.data("tab");$(".step-btn").removeClass("active"),t.addClass("active"),$(".section-content").hide(),$("#"+e).css("visibility","visible").show()}),$(document).on("click","#loadpreviousProducts",function(){loadProducts()});