/*!
Waypoints - 4.0.1
Copyright © 2011-2016 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blob/master/licenses.txt
*/!function(){"use strict";function t(o){if(!o)throw new Error("No options passed to Waypoint constructor");if(!o.element)throw new Error("No element option passed to Waypoint constructor");if(!o.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=t.Adapter.extend({},t.defaults,o),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=o.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,e+=1}var e=0,i={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var o in i)e.push(i[o]);for(var n=0,r=e.length;r>n;n++)e[n][t]()},t.destroyAll=function(){t.invokeAll("destroy")},t.disableAll=function(){t.invokeAll("disable")},t.enableAll=function(){t.Context.refreshAll();for(var e in i)i[e].enabled=!0;return this},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},t.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){"use strict";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=n.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,o[t.waypointContextKey]=this,i+=1,n.windowContext||(n.windowContext=!0,n.windowContext=new e(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var i=0,o={},n=window.Waypoint,r=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?"horizontal":"vertical";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical),i=this.element==this.element.window;t&&e&&!i&&(this.adapter.off(".waypoints"),delete o[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,n.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on("scroll.waypoints",function(){(!e.didScroll||n.isTouch)&&(e.didScroll=!0,n.requestAnimationFrame(t))})},e.prototype.handleResize=function(){n.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var i in e){var o=e[i],n=o.newScroll>o.oldScroll,r=n?o.forward:o.backward;for(var s in this.waypoints[i]){var a=this.waypoints[i][s];if(null!==a.triggerPoint){var l=o.oldScroll<a.triggerPoint,h=o.newScroll>=a.triggerPoint,p=l&&h,u=!l&&!h;(p||u)&&(a.queueTrigger(r),t[a.group.id]=a.group)}}}for(var c in t)t[c].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?n.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?n.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var i in this.waypoints[e])t.push(this.waypoints[e][i]);for(var o=0,n=t.length;n>o;o++)t[o].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,i=e?void 0:this.adapter.offset(),o={};this.handleScroll(),t={horizontal:{contextOffset:e?0:i.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:e?0:i.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var r in t){var s=t[r];for(var a in this.waypoints[r]){var l,h,p,u,c,d=this.waypoints[r][a],f=d.options.offset,w=d.triggerPoint,y=0,g=null==w;d.element!==d.element.window&&(y=d.adapter.offset()[s.offsetProp]),"function"==typeof f?f=f.apply(d):"string"==typeof f&&(f=parseFloat(f),d.options.offset.indexOf("%")>-1&&(f=Math.ceil(s.contextDimension*f/100))),l=s.contextScroll-s.contextOffset,d.triggerPoint=Math.floor(y+l-f),h=w<s.oldScroll,p=d.triggerPoint>=s.oldScroll,u=h&&p,c=!h&&!p,!g&&u?(d.queueTrigger(s.backward),o[d.group.id]=d.group):!g&&c?(d.queueTrigger(s.forward),o[d.group.id]=d.group):g&&s.oldScroll>=d.triggerPoint&&(d.queueTrigger(s.forward),o[d.group.id]=d.group)}}return n.requestAnimationFrame(function(){for(var t in o)o[t].flushTriggers()}),this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in o)o[t].refresh()},e.findByElement=function(t){return o[t.waypointContextKey]},window.onload=function(){r&&r(),e.refreshAll()},n.requestAnimationFrame=function(e){var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t;i.call(window,e)},n.Context=e}(),function(){"use strict";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function i(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),o[this.axis][this.name]=this}var o={vertical:{},horizontal:{}},n=window.Waypoint;i.prototype.add=function(t){this.waypoints.push(t)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var o=this.triggerQueues[i],n="up"===i||"left"===i;o.sort(n?e:t);for(var r=0,s=o.length;s>r;r+=1){var a=o[r];(a.options.continuous||r===o.length-1)&&a.trigger([i])}}this.clearTriggerQueues()},i.prototype.next=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints),o=i===this.waypoints.length-1;return o?null:this.waypoints[i+1]},i.prototype.previous=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints);return i?this.waypoints[i-1]:null},i.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},i.prototype.remove=function(t){var e=n.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(t){return o[t.axis][t.name]||new i(t)},n.Group=i}(),function(){"use strict";function t(t){this.$element=e(t)}var e=window.jQuery,i=window.Waypoint;e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,i){t.prototype[i]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[i].apply(this.$element,t)}}),e.each(["extend","inArray","isEmptyObject"],function(i,o){t[o]=e[o]}),i.adapters.push({name:"jquery",Adapter:t}),i.Adapter=t}(),function(){"use strict";function t(t){return function(){var i=[],o=arguments[0];return t.isFunction(arguments[0])&&(o=t.extend({},arguments[1]),o.handler=arguments[0]),this.each(function(){var n=t.extend({},o,{element:this});"string"==typeof n.context&&(n.context=t(this).closest(n.context)[0]),i.push(new e(n))}),i}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}();;/*!
Waypoints Infinite Scroll Shortcut - 4.0.1
Copyright © 2011-2016 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blob/master/licenses.txt
*/!function(){"use strict";function t(n){this.options=i.extend({},t.defaults,n),this.container=this.options.element,"auto"!==this.options.container&&(this.container=this.options.container),this.$container=i(this.container),this.$more=i(this.options.more),this.$more.length&&(this.setupHandler(),this.waypoint=new o(this.options))}var i=window.jQuery,o=window.Waypoint;t.prototype.setupHandler=function(){this.options.handler=i.proxy(function(){this.options.onBeforePageLoad(),this.destroy(),this.$container.addClass(this.options.loadingClass),i.get(i(this.options.more).attr("href"),i.proxy(function(t){var n=i(i.parseHTML(t)),e=n.find(this.options.more),s=n.find(this.options.items);s.length||(s=n.filter(this.options.items)),this.$container.append(s),this.$container.removeClass(this.options.loadingClass),e.length||(e=n.filter(this.options.more)),e.length?(this.$more.replaceWith(e),this.$more=e,this.waypoint=new o(this.options)):this.$more.remove(),this.options.onAfterPageLoad(s)},this))},this)},t.prototype.destroy=function(){this.waypoint&&this.waypoint.destroy()},t.defaults={container:"auto",items:".infinite-item",more:".infinite-more-link",offset:"bottom-in-view",loadingClass:"infinite-loading",onBeforePageLoad:i.noop,onAfterPageLoad:i.noop},o.Infinite=t}();;const infinite=new Waypoint.Infinite({element:$('.infinite-container')[0],offset:'bottom-in-view',handler:function(direction){alert('You have scrolled to a thing')},});;const navbarMenu=document.getElementById("menu");const burgerMenu=document.getElementById("burger");const bgOverlay=document.querySelector(".overlay");if(burgerMenu&&navbarMenu&&bgOverlay){burgerMenu.addEventListener("click",()=>{navbarMenu.classList.toggle("is-active");bgOverlay.classList.toggle("is-active");$('.toolbar__section').css('z-index','0');$('.progress-section').css('z-index','0');});bgOverlay.addEventListener("click",()=>{navbarMenu.classList.toggle("is-active");bgOverlay.classList.toggle("is-active");$('.toolbar__section').css('z-index','1');$('.progress-section').css('z-index','2');});}
document.querySelectorAll(".menu-link").forEach((link)=>{link.addEventListener("click",()=>{navbarMenu.classList.remove("is-active");bgOverlay.classList.remove("is-active");$('.toolbar__section').css('z-index','1');});});var swiper=new Swiper(".slide-content",{slidesPerView:3,spaceBetween:25,loop:true,centerSlide:'true',fade:'true',grabCursor:'true',pagination:{el:".swiper-pagination",clickable:true,dynamicBullets:true,},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev",},breakpoints:{0:{slidesPerView:1,},520:{slidesPerView:2,},950:{slidesPerView:3,},},});function getParams(url=window.location){let params={};new URL(url).searchParams.forEach(function(val,key){if(params[key]!==undefined){if(!Array.isArray(params[key])){params[key]=[params[key]];}
params[key].push(val);}else{params[key]=val;}});return params;}
function makePassword(length){var result='';var characters='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';var charactersLength=characters.length;for(var i=0;i<length;i++){result+=characters.charAt(Math.floor(Math.random()*charactersLength));}
return result;}
var checkboxes=document.querySelectorAll('.form-check-input');var categories=document.querySelectorAll('.category-item');var thumbnails=document.querySelectorAll('.thumbnail');const url=String(window.location.href).replaceAll('+',' ');let scheduled_function=false;const delay_by_in_ms=500;const results_div=$('.card-list');const pagination_div=$('.pagination');const endpoint='/e-shop/';let ajax_call=function(endpoint,request_parameters){$.getJSON(endpoint,request_parameters).done(response=>{$('.search-button').html('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16"><path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/></svg>');$('.infinite-container').css('display','grid');results_div.html(response['html_from_view']);})}
function updateVariantDetails(event){$('.product').addClass('disabled');var url=new URL(window.location);var id=url.href.substring(url.href.lastIndexOf('/')+1);var selected_product=$('.thumbnail.selected').data('slug');url.searchParams.set('variant',selected_product);var request_parameters={"variant_slug":selected_product,}
window.history.pushState({},'',url);$.post({type:'GET',url:'/products/'+id,data:request_parameters,headers:{'X-CSRFTOKEN':csrftoken,"Content-type":"application/json"},success:function(response){setTimeout(function(){$('.product').removeClass('disabled');$('.product-info__wrapper').html(response['html_from_view']);},delay_by_in_ms);},error:function(xhr,ajaxOptions,thrownError){console.log("not working")}});}
function getCookie(name){let cookieValue=null;if(document.cookie&&document.cookie!==''){const cookies=document.cookie.split(';');for(let i=0;i<cookies.length;i++){const cookie=cookies[i].trim();if(cookie.substring(0,name.length+1)===(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}
return cookieValue;}
const csrftoken=getCookie('csrftoken');$(document).on('click','.modal-btn',function(){var id='#'+$(this).data('modal');$(id).css({'visibility':'visible','opacity':1,'pointer-events':'auto',});$('.progress-section').css('z-index','0');})
$(document).on('click','.modal-close',function(){var id='#'+$(this).data('modal');$(id).css({'visibility':'hidden','opacity':0,'pointer-events':'none',});$('.progress-section').css('z-index','2');})
$(document).on('click','.remove__notification',function(){$(this).parents('.card').removeClass('active');})
$(document).on('click','.cart-btn',function(){$('.cart-wrapper').css({'opacity':'1','z-index':'10'});$('.cart.card').addClass('open');})
$(document).on('click','.hide__cart',function(){$('.cart-wrapper').css({'opacity':'0','z-index':'-1'});$('.cart.card').removeClass('open');})
$(document).on("click",function(e){if(!$(e.target).is(".dropdown .plain-btn")){if($(e.target).parents(".dropdown-card").length==0){$('.dropdown-box').removeClass('open');}}
else{$('.dropdown-box').removeClass('open');if($(e.target).next().hasClass('open')){$(e.target).next().removeClass('open');}
else{$(e.target).next().addClass('open');}}});$(document).on('click','.close-badge',function(e){e.preventDefault();var value=$(this).parents('button').attr('data-val');var checked_input=$('input').filter(function(){return this.value==value});var selected_category=$('.category-item').filter(function(){return this.dataset.val==value});var unchecked=checked_input.prop("checked",false);selected_category.removeClass('selected');selected_category.css("--card-gradient","66%");if(unchecked){$(this).parents('button').remove();}})
$(document).on('click','.category-item',function(event){var index=$('.category-item').index($(this));if($(this).hasClass('selected')){$(this).removeClass('selected');$('.category-item').get(index).style.setProperty("--card-gradient","66%");}
else{$(this).addClass('selected');$('.category-item').get(index).style.setProperty("--card-gradient","35%");}})
$(document).on('click','.category-item, .close-badge',function(event){event.preventDefault();$('.search-button').html('<div class="lds-ring"><div></div><div></div><div></div><div></div></div>');$('.infinite-container').css("display",'block');$('.infinite-container').html('<div class="lds-ellipsis" style="display: flex;-webkit-box-pack: center;justify-content: center;margin: auto;"><div></div><div></div><div></div><div></div></div>');const url=new URL(window.location);var title=$('input[name="title"]').val();if(title){url.searchParams.set('q',title);}
else{url.searchParams.delete('q');}
var c_checkboxes=$('.category-item.selected').map(function(_,el){return $(el).attr('data-val');}).get();if(c_checkboxes.length>0){category=c_checkboxes
url.searchParams.set('category',c_checkboxes);}
else{url.searchParams.delete('category');category=$('.category-item').map(function(_,el){return $(el).attr('data-val');}).get();}
var b_checkboxes=$('input[name="brand"]:checked').map(function(_,el){return $(el).val();}).get();if(b_checkboxes.length>0){brand=b_checkboxes
url.searchParams.set('brand',brand);}
else{var brand=$('input[name="brand"]').map(function(_,el){return $(el).val();}).get();url.searchParams.delete('brand');}
const request_parameters={"brand[]":brand,"category[]":category,"q":title,"is_ajax":"True"}
if(scheduled_function){clearTimeout(scheduled_function)}
window.history.pushState({},'',url);scheduled_function=setTimeout(ajax_call,delay_by_in_ms,endpoint,request_parameters)})
$(document).on('change','.choice-input-wrapper .form-check-input, input[name="title"]',function(event){event.preventDefault();$('.search-button').html('<div class="lds-ring"><div></div><div></div><div></div><div></div></div>');$('.infinite-container').css("display",'block');$('.infinite-container').html('<div class="lds-ellipsis" style="display: flex;-webkit-box-pack: center;justify-content: center;margin: auto;"><div></div><div></div><div></div><div></div></div>');const url=new URL(window.location);$('infinite-container').append('<div id="overlay"><div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div></div>');var title=$('input[name="title"]').val();if(title){url.searchParams.set('q',title);}
else{url.searchParams.delete('q');}
var c_checkboxes=$('.category-item.selected').map(function(_,el){return $(el).attr('data-val');}).get();if(c_checkboxes.length>0){category=c_checkboxes
url.searchParams.set('category',c_checkboxes);}
else{url.searchParams.delete('category');category=$('.category-item').map(function(_,el){return $(el).attr('data-val');}).get();}
var b_checkboxes=$('input[name="brand"]:checked').map(function(_,el){return $(el).val();}).get();if(b_checkboxes.length>0){brand=b_checkboxes
url.searchParams.set('brand',brand);}
else{var brand=$('input[name="brand"]').map(function(_,el){return $(el).val();}).get();url.searchParams.delete('brand');}
const request_parameters={"brand[]":brand,"category[]":category,"q":title,"is_ajax":"True"}
if(scheduled_function){clearTimeout(scheduled_function)}
window.history.pushState({},'',url);scheduled_function=setTimeout(ajax_call,delay_by_in_ms,endpoint,request_parameters)})
$(window).on('load',function(){const url=new URL(window.location);if(url.href.includes('e-shop/?')){$('.infinite-container').css("display",'block');$('.infinite-container').html('<div class="lds-ellipsis" style="display: flex;-webkit-box-pack: center;justify-content: center;margin: auto;"><div></div><div></div><div></div><div></div></div>');var title=$('input[name="title"]').val();var c_checkboxes=$('.category-item.selected').map(function(_,el){return $(el).attr('data-val');}).get();if(c_checkboxes.length>0){category=c_checkboxes}
else{category=$('.category-item').map(function(_,el){return $(el).attr('data-val');}).get();}
var b_checkboxes=$('input[name="brand"]:checked').map(function(_,el){return $(el).val();}).get();if(b_checkboxes.length>0){brand=b_checkboxes}
else{var brand=$('input[name="brand"]').map(function(_,el){return $(el).val();}).get();}
const request_parameters={"brand[]":brand,"category[]":category,"q":title,"is_ajax":"True"}
if(scheduled_function){clearTimeout(scheduled_function)}
window.history.pushState({},'',url);scheduled_function=setTimeout(ajax_call,delay_by_in_ms,endpoint,request_parameters);}})
thumbnails.forEach(function(thumbnail){thumbnail.addEventListener('click',function(){var newSelection=thumbnail.dataset.big;$('.thumbnail').removeClass('selected');$(this).addClass('selected');var $img=$('.primary').css("background-image","url("+newSelection+")");$('.primary').empty().append($img.hide().fadeIn('slow'));if(url.includes(this.value)){window.localStorage.setItem(this.id,this.dataset.slug);}});});$(document).ready(function(){var jQueryPlugin=(window.jQueryPlugin=function(ident,func){return function(arg){if(this.length>1){this.each(function(){var $this=$(this);if(!$this.data(ident)){$this.data(ident,func($this,arg));}});return this;}else if(this.length===1){if(!this.data(ident)){this.data(ident,func(this,arg));}
return this.data(ident);}};});function Guantity(){$(document).on('click','button[data-quantity-minus]',function(){document.querySelector('input[data-quantity-target]').value--;})
$(document).on('click','button[data-quantity-plus]',function(){document.querySelector('input[data-quantity-target]').value++;})}
$.fn.Guantity=jQueryPlugin("Guantity",Guantity);$("[data-quantity]").Guantity();})
$(document).on('click','#down-slide',function(event){var windowSize=$(window).width();if(windowSize<=768){$('.img-list').animate({scrollLeft:"+=200px"},"slow");}
else{$('.img-list').animate({scrollTop:"+=200px"},"slow");}})
$(document).on('click','#up-slide',function(event){var windowSize=$(window).width();event.preventDefault();if(windowSize<=768){$('.img-list').animate({scrollLeft:"-=200px"},"slow");}
else{$('.img-list').animate({scrollTop:"-=200px"},"slow");}})
$(document).on('click','.thumbnail',function(event){event.preventDefault();updateVariantDetails(event);})
$(window).on('load',function(event){if(url.includes('products')){updateVariantDetails(event);}})
$(document).on('click','#addCart',function(event){event.preventDefault();$(this).html('<div class="lds-ring" style="margin: auto"><div></div><div></div><div></div><div></div></div>');var url=new URL(window.location);var slug=url.href.substring(url.href.lastIndexOf('/')+1);var selected_product=$('.thumbnail.selected').data('slug');var qty=$('input[data-quantity-target]').val();var request_parameters={"variant_slug":selected_product,"quantity":qty,}
$.post({type:'POST',url:'/add-to-cart/'+slug,data:JSON.stringify(request_parameters),dataType:'json',headers:{'X-CSRFTOKEN':csrftoken,"Content-type":"application/json"},success:function(data){if($('price-item--discount').length){var product_price=$('.price-item--discount').text();}
else{var product_price=$('.price-item--regular').text();}
$('.cart-notification__product').html('<div class="cart-product__img border">'
+'<img src="'+$('.thumbnail.selected .thumbnail-image').css('background-image').replace(/^url\(['"](.+)['"]\)/,'$1')+'" alt="385w JA Solar - Solar Panel - Black Frame" width="60" height="auto" loading="lazy">'
+'</div>'+'<div class="cart-notification__product-info">'+'<h6 style="font-weight: 500">'+$(".product__title h1").text()+'</h6>'+'<span class="notification-product__feature">Qty: '+qty+'</span>'+'<span class="notification-product__feature">Price: '+product_price+'</span>'+'</div>')
$(".menu-item .cart-btn").load(location.href+" .menu-item .cart-btn");$(".mobile-cart").load(location.href+" .mobile-cart");$('.cart__body').load(location.href+" .cart__body");$('.cart__footer').load(location.href+" .cart__footer");setTimeout(function(){$('#addCart').html('Add to Cart');$('.cart-notification .card').addClass('active');$('.form__error').fadeOut('slow');$('.form__error').removeClass('active');},delay_by_in_ms);setTimeout(function(){$('.cart-notification .card').removeClass('active');},8000);},error:function(xhr,ajaxOptions,thrownError){setTimeout(function(){$('#addCart').html('Add to Cart');$('.form__error').fadeIn('slow');$('.form__error').addClass('active');$('.error__content').html(xhr.responseJSON['err']);},delay_by_in_ms);setTimeout(function(){$('.form__error').fadeOut('slow');$('.form__error').removeClass('active');},10000);}});});$(document).on('change','input[data-update-quantity]',function(event){event.preventDefault();var new_quantity=$(this).val();var request_parameters={'quantity':new_quantity}
var slug=$(this).attr('data-update-quantity');$(this).parents('.cart-notification__product').addClass('disabled');$.post({type:'POST',url:'/update-cart/'+slug,data:JSON.stringify(request_parameters),dataType:'json',headers:{'X-CSRFTOKEN':csrftoken,"Content-type":"application/json"},success:function(data){setTimeout(function(){$('.cart-notification__product').removeClass('disabled');$("#cart-subtotal").load(location.href+" #cart-subtotal");$('.form__error').fadeOut('slow');$('.form__error').removeClass('active');},delay_by_in_ms);},error:function(xhr,ajaxOptions,thrownError){$('.cart-notification__product').removeClass('disabled');setTimeout(function(){$('.form__error').fadeIn('slow');$('.form__error').addClass('active');$('.error__content').html(xhr.responseJSON['err']);},delay_by_in_ms);setTimeout(function(){$('.form__error').fadeOut('slow');$('.form__error').removeClass('active');},10000);}});})
$(document).on('click','button[data-remove-cart-item]',function(event){event.preventDefault();var $this=$(this);var slug=$this.attr('data-remove-cart-item');var request_parameters={'slug':slug};$this.html('<div class="lds-ring" style="margin: auto;padding-left: 10px;"><div></div><div></div><div></div><div></div></div>');$.ajax({type:'POST',url:'/remove-item/'+slug,data:JSON.stringify(request_parameters),dataType:'json',headers:{'X-CSRFTOKEN':csrftoken,"Content-type":"application/json"},success:function(data){setTimeout(function(){$this.parents('.cart-notification__product').remove();$(".menu-item .cart-btn").load(location.href+" .menu-item .cart-btn");$(".mobile-cart").load(location.href+" .mobile-cart");$("#cart-subtotal").load(location.href+" #cart-subtotal");if($('.cart__body .cart-notification__product').length==0){$('.cart__body').html('<div class="cart__empty-state">NO ITEMS FOUND</div>');$('.cart__footer').remove();}
$('.form__error').fadeOut('slow');$('.form__error').removeClass('active');},delay_by_in_ms);},error:function(xhr,ajaxOptions,thrownError){$('.cart-notification__product').removeClass('disabled');setTimeout(function(){$('.form__error').fadeIn('slow');$('.form__error').addClass('active');$('.error__content').html("Something went wrong! Please try again.");},delay_by_in_ms);setTimeout(function(){$('.form__error').fadeOut('slow');$('.form__error').removeClass('active');},10000);}});})
document.addEventListener('DOMContentLoaded',function(){checkboxes.forEach(function(checkbox){if(url.includes(checkbox.value)){document.getElementById(checkbox.id).checked=true;html='<button class="badge plain-btn" data-val="'+checkbox.value+'"><span>'+checkbox.value+'</span><div class="close close-badge"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16"><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/></svg></div></button>';$('.filter-tags').append(html);}
else{window.localStorage.removeItem(checkbox.id);$('.badge[data-val="'+checkbox.value+'"]').remove();}});categories.forEach(function(category){if(url.includes(category.dataset.val)){document.getElementById(category.id).classList.add('selected');document.getElementById(category.id).style.setProperty("--card-gradient","35%");html='<button class="badge plain-btn" data-val="'+category.dataset.val+'"><span>'+category.dataset.val+'</span><div class="close close-badge"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16"><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/></svg></div></button>';$('.filter-tags').append(html);}
else{window.localStorage.removeItem(category.id);$('.badge[data-val="'+category.dataset.val+'"]').remove();}});thumbnails.forEach(function(el,i){if(url.includes(el.dataset.slug)){el.classList.add('selected');var newSelection=el.dataset.big;var $img=$('.primary').css("background-image","url("+newSelection+")");$('.primary').empty().append($img.hide().fadeIn('slow'));if(i!==0){$('.thumbnail:first').removeClass('selected');}}
else{window.localStorage.removeItem(el.id);}});});checkboxes.forEach(function(checkbox){checkbox.addEventListener('change',function(){if(url.includes(this.value)){window.localStorage.setItem(this.id,this.value);}
if($('.badge[data-val="'+this.value+'"]').length){$('.badge[data-val="'+this.value+'"]').remove();}
else{html='<button class="badge plain-btn" data-val="'+this.value+'"><span>'+this.value+'</span><div class="close close-badge"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16"><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/></svg></div></button>';$('.filter-tags').append(html);}});});categories.forEach(function(category){category.addEventListener('click',function(){if(url.includes(this.dataset.val)){window.localStorage.setItem(this.id,this.value);}
if($('.badge[data-val="'+this.dataset.val+'"]').length){$('.badge[data-val="'+this.dataset.val+'"]').remove();}
else{html='<button class="badge plain-btn" data-val="'+this.dataset.val+'"><span>'+this.dataset.val+'</span><div class="close close-badge"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16"><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/></svg></div></button>';$('.filter-tags').append(html);}});});$(document).on('click','#popRecover',function(event){event.preventDefault();$('.user-layout').html('<form class="user" id="recover">'+'<h1>Reset your password</h1>'+'<span class="section__caption">'+'We will send you an email to reset your password'+'</span>'+'<div class="form__error small" role="alert">'+'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="red" class="bi bi-exclamation-circle-fill" viewBox="0 0 16 16">'+'<path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>'+'</svg>'+'<span class="error__content">'+'</span>'+'</div>'+'<div class="input-group">'+'<div class="field">'+'<input id="emailField" type="text" name="email" placeholder=" ">'+'<label for="emailField">Email</label>'+'</div>'+'</div>'+'<div>'+'<button class="btn button-black">Submit</button>'+'</div>'+'<div class="signup__recover">'+'<a href="/profile/" class="small">Cancel</a>'+'</div>'+'</form>')})
$(document).on('submit','.login',function(event){event.preventDefault();var $this=$(this);var input_data={'username':$('input[name="username"]').val(),'password':$('input[name="password"]').val(),'next':$('input[name="next"]').val(),}
$this.addClass('disabled');$('.button-black').html('<div class="lds-ring"><div></div><div></div><div></div><div></div></div>');$.ajax({type:'POST',url:'/login/',data:JSON.stringify(input_data),dataType:'json',headers:{'X-CSRFTOKEN':csrftoken,"Content-type":"application/json"},success:function(data){setTimeout(function(){$this.removeClass('disabled');if(data['next_url']){window.location.href=data['next_url'];}
else{window.location.href='/';}},delay_by_in_ms);},error:function(xhr,ajaxOptions,thrownError){setTimeout(function(){$this.removeClass('disabled');$('.button-black').html('Sign in');var list_of_errors=xhr.responseJSON['error'];$('.form__error').fadeIn('slow');$('.form__error').addClass('active');for(let i=0;i<list_of_errors.length;i++){var newItem=list_of_errors[i];$(".error__content").html(newItem);}},delay_by_in_ms);setTimeout(function(){$('.form__error').fadeOut('slow');$('.form__error').removeClass('active');},10000);}});});const account_types=[]
$(document).on('click','.local-account__type',function(event){event.preventDefault();var $this=$(this);account_types.push($this.data('account-type'));$('#flexibleSignup').html('<div class="lds-ellipsis" style="display: flex;-webkit-box-pack: center;justify-content: center;margin: auto;"><div></div><div></div><div></div><div></div></div>');setTimeout(function(){if($this.data('account-type')=='individual'){const inv_signup='<form class="user signup">'+'<h1>Create Account</h1>'+'<div class="form__error small" role="alert">'+'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="red" class="bi bi-exclamation-circle-fill" viewBox="0 0 16 16">'+'<path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>'+'</svg>'+'<span class="error__content">'+'</span>'+'</div>'+'<div class="input-group">'+'<div class="field">'+'<input id="firstnameField" type="text" name="first_name" placeholder=" " autocapitalize="off" autocomplete="off" autocorrect="off" aria-required="true">'+'<label for="firstnameField">First Name</label>'+'</div>'+'</div>'+'<div class="input-group">'+'<div class="field">'+'<input id="lastnameField" type="text" name="last_name" placeholder=" " autocapitalize="off" autocomplete="off" autocorrect="off" aria-required="true">'+'<label for="lastnameField">Last Name</label>'+'</div>'+'</div>'+'<div class="input-group">'+'<div class="field">'+'<input id="emailuserField" type="email" name="email" placeholder=" " autocapitalize="off" autocomplete="off" autocorrect="off" aria-required="true">'+'<label for="emailuserField">Email</label>'+'</div>'+'</div>'+'<div class="input-group">'+'<div class="field">'+'<input id="usernameField" type="text" name="username" placeholder=" " autocapitalize="off" autocomplete="off" autocorrect="off" aria-required="true">'+'<label for="usernameField">Username</label>'+'</div>'+'</div>'+'<div class="input-group">'+'<div class="field">'+'<input id="passwordField" type="password" name="password1" placeholder=" " autocapitalize="off" autocomplete="off" autocorrect="off" aria-required="true">'+'<label for="passwordField">Password</label>'+'</div>'+'</div>'+'<div class="input-group">'+'<div class="field">'+'<input id="passwordField" type="password" name="password2" placeholder=" " autocapitalize="off" autocomplete="off" autocorrect="off" aria-required="true">'+'<label for="passwordField">Confirm Password</label>'+'</div>'+'</div>'+'<div class="signup__agreement">'+'<div class="choice-input-wrapper ">'+'<input type="checkbox" name="agreement" class="form-check-input mt-0" autocapitalize="off" autocomplete="off" autocorrect="off" aria-required="true"> '+'<label class="form-check-label small" for="">Yes, I understand and agree to the Upwork Terms of Service, including the User Agreement and Privacy Policy.</label>'+'</div>'+'</div>'+'<div class="or or--x" aria-role="presentation"> OR </div>'+'<div id="googlebtnDiv"></div>'+'<div class="signup__recover">'+'<a href="/profile/" class="recover small">Already have an account?</a>'+'</div>'+'<div id="signin">'+'<button class="btn button-black">Sign Up</button>'+'</div>'+'</form>'
$('#flexibleSignup').html(inv_signup);}
else if($this.data('account-type')=='business'){const business_signup='<form class="user signup">'+'<h1>Create Account</h1>'+'<div class="form__error small" role="alert">'+'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="red" class="bi bi-exclamation-circle-fill" viewBox="0 0 16 16">'+'<path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>'+'</svg>'+'<span class="error__content">'+'</span>'+'</div>'+'<div class="input-group">'+'<div class="field">'+'<input id="companynameField" type="text" name="company_name" placeholder=" " autocapitalize="off" autocomplete="off" autocorrect="off" aria-required="true">'+'<label for="companynameField">Company Name</label>'+'</div>'+'</div>'+'<div class="input-group">'+'<div class="field">'+'<input id="emailuserField" type="email" name="email" placeholder=" " autocapitalize="off" autocomplete="off" autocorrect="off" aria-required="true">'+'<label for="emailuserField">Email</label>'+'</div>'+'</div>'+'<div class="input-group">'+'<div class="field">'+'<input id="passwordField" type="password" name="password1" placeholder=" " autocapitalize="off" autocomplete="off" autocorrect="off" aria-required="true">'+'<label for="passwordField">Password</label>'+'</div>'+'</div>'+'<div class="input-group">'+'<div class="field">'+'<input id="passwordField" type="password" name="password2" placeholder=" " autocapitalize="off" autocomplete="off" autocorrect="off" aria-required="true">'+'<label for="passwordField">Confirm Password</label>'+'</div>'+'</div>'+'<div class="signup__agreement">'+'<div class="choice-input-wrapper ">'+'<input type="checkbox" name="agreement" class="form-check-input mt-0">'+'<label class="form-check-label small" for="">Yes, I understand and agree to the Upwork Terms of Service, including the User Agreement and Privacy Policy.</label>'+'</div>'+'</div>'+'<div class="or or--x" aria-role="presentation"> OR </div>'+'<div id="googlebtnDiv"></div>'+'<div class="signup__recover">'+'<a href="/profile/" class="recover small">Already have an account?</a>'+'</div>'+'<div id="signin">'+'<button class="btn button-black">Sign Up</button>'+'</div>'+'</form>'
$('#flexibleSignup').html(business_signup);}
google.accounts.id.initialize({client_id:"86282417486-l5morm5n1a4pa39ftt9bllrdm9acfinv.apps.googleusercontent.com",callback:handleCredentialResponse});google.accounts.id.renderButton(document.getElementById("googlebtnDiv"),{theme:"outline",size:"large"});google.accounts.id.prompt();},delay_by_in_ms);})
$(document).on('click','.google-account__type',function(event){event.preventDefault();var $this=$(this);$('.user__type.selected').removeClass('selected');$this.addClass('selected');account_types.push($this.data('account-type'));$('.extra-fields').html('<div class="lds-ellipsis" style="display: flex;-webkit-box-pack: center;justify-content: center;margin: auto;"><div></div><div></div><div></div><div></div></div>');setTimeout(function(){if($this.data('account-type')=='individual'){console.log("individual");$('.extra-fields').html('<div class="input-group"><div class="field"><input id="usernameField" type="text" name="username" placeholder=" " autocapitalize="off" autocomplete="off" autocorrect="off" aria-required="true"><label for="usernameField">Username</label></div></div>')}
else if($this.data('account-type')=='business'){$('.extra-fields').html('<div class="input-group"><div class="field"><input id="companynameField" type="text" name="company_name" placeholder=" " autocapitalize="off" autocomplete="off" autocorrect="off" aria-required="true"><label for="companynameField">Company Name</label></div></div>')}},delay_by_in_ms);})
$(document).on('submit','.signup',function(event){event.preventDefault();if($('input[name="agreement"]').is(":checked")){var agreement=true}
else{var agreement=false}
var input_data={'account_type':account_types[0],'first_name':$('input[name="first_name"]').val(),'last_name':$('input[name="last_name"]').val(),'username':$('input[name="username"]').val(),'email':$('input[name="email"]').val(),'password1':$('input[name="password1"]').val(),'password2':$('input[name="password2"]').val(),'company_name':$('input[name="company_name"]').val(),'provider':'Email','agreement':agreement,}
var $this=$(this);$this.addClass('disabled');$('.button-black').html('<div class="lds-ring"><div></div><div></div><div></div><div></div></div>');$.ajax({type:'POST',url:'/sign-up/',data:JSON.stringify(input_data),dataType:'json',headers:{'X-CSRFTOKEN':csrftoken,"Content-type":"application/json"},success:function(data){setTimeout(function(){$this.removeClass('disabled');$("#flexibleSignup").html('<div class="user signup" style="text-align: left;gap: 0;">'+'<h2>Account created!</h2>'+'<div style="color: #565e69; font-size: 16px">'+'To log in, please click the verification link we sent to'+'</div>'+'<legend style="font-size: 16px;font-weight: 900;">'+$('input[name="email"]').val()+''+'<hr>'+'<div style="color: #565e69; font-size: 16px">'+'Didn’t receive an email? Be sure to check your spam folder, or <a data-email="'+$('input[name="email"]').val()+'" id="resend-email" style="text-decoration: underline; color: #3869d4; cursor: pointer">resend link.</a>'+'</div>'+'</div>')},delay_by_in_ms);},error:function(xhr,ajaxOptions,thrownError){setTimeout(function(){$this.removeClass('disabled');$('.button-black').html('Sign up');var list_of_errors=xhr.responseJSON['error'];$('.form__error').fadeIn('slow');$('.form__error').addClass('active');for(let i=0;i<list_of_errors.length;i++){var newItem=list_of_errors[i];$(".error__content").html(newItem);}},delay_by_in_ms);setTimeout(function(){$('.form__error').fadeOut('slow');$('.form__error').removeClass('active');},10000);}});});function handleGoogleLogin(data){var input_data={'email':data}
$('.login').append('<div class="lds-ellipsis-div" style="position: absolute;right: 0;left: 0;z-index: 10000;height: 450px;width: 100%;pointer-events: none;background-image: linear-gradient(rgb(231 228 228 / 39%), rgb(231 228 228 / 39%));"><div class="lds-ellipsis" style="margin: 10rem;"><div></div><div></div><div></div><div></div></div></div>');$.ajax({type:'POST',url:'/google-signin/',data:JSON.stringify(input_data),dataType:'json',headers:{'X-CSRFTOKEN':csrftoken,"Content-type":"application/json"},success:function(data){setTimeout(function(){window.location.href='/';},delay_by_in_ms);},error:function(xhr,ajaxOptions,thrownError){setTimeout(function(){$('.lds-ellipsis-div').remove();var list_of_errors=xhr.responseJSON['error'];$('.form__error').fadeIn('slow');$('.form__error').addClass('active');for(let i=0;i<list_of_errors.length;i++){var newItem=list_of_errors[i];$(".error__content").html(newItem);}},delay_by_in_ms);setTimeout(function(){$('.form__error').fadeOut('slow');$('.form__error').removeClass('active');},10000);}});}
$(document).on('submit','#recover',function(event){event.preventDefault();var $this=$(this);var input_data={'email':$('input[name="email"]').val(),}
$this.addClass('disabled');$('.button-black').html('<div class="lds-ring"><div></div><div></div><div></div><div></div></div>');$.ajax({type:'POST',url:'/reset/password/',data:JSON.stringify(input_data),dataType:'json',headers:{'X-CSRFTOKEN':csrftoken,"Content-type":"application/json"},success:function(data){setTimeout(function(){$(".user-layout").html('<div class="user signup" style="text-align: left;gap: 0;">'+'<h2>Successful!</h2>'+'<div style="color: #565e69; font-size: 16px">'+'We have sent you an email with a link to update your password.'+'</div>'+'<legend style="font-size: 16px;font-weight: 900;">'+$('input[name="email"]').val()+''+'<hr>'+'<div style="color: #565e69; font-size: 16px">'+'Didn’t receive an email? Be sure to check your spam folder'+'</div>'+'</div>')},delay_by_in_ms);},error:function(xhr,ajaxOptions,thrownError){setTimeout(function(){$this.removeClass('disabled');$('.button-black').html('Submit');var list_of_errors=xhr.responseJSON['err'];$('.form__error').fadeIn('slow');$('.form__error').addClass('active');for(let i=0;i<list_of_errors.length;i++){var newItem=list_of_errors[i];$(".error__content").html(newItem);}},delay_by_in_ms);setTimeout(function(){$('.form__error').fadeOut('slow');$('.form__error').removeClass('active');},10000);}});});$(document).on('submit','#resetPassword',function(event){event.preventDefault();var url=window.location.pathname;var uid=url.split('/')[4];var token=url.split('/')[5];console.log(token,uid);var input_data={'new_password1':$('input[name="new_password1"]').val(),'new_password2':$('input[name="new_password2"]').val(),'token':token,'uid':uid}
$('.button-black').html('<div class="lds-ring"><div></div><div></div><div></div><div></div></div>');$.ajax({type:'POST',url:window.location.pathname,data:JSON.stringify(input_data),dataType:'json',headers:{'X-CSRFTOKEN':csrftoken,"Content-type":"application/json"},success:function(){setTimeout(function(){window.location.href='/profile/';},delay_by_in_ms);},error:function(xhr,ajaxOptions,thrownError){setTimeout(function(){$('.button-black').html('Submit');var list_of_errors=xhr.responseJSON['err'];$('.form__error').fadeIn('slow');$('.form__error').addClass('active');for(let i=0;i<list_of_errors.length;i++){var newItem=list_of_errors[i];$(".error__content").html(newItem);}},delay_by_in_ms);setTimeout(function(){$('.form__error').fadeOut('slow');$('.form__error').removeClass('active');},10000);}});});function handleCredentialResponse(response){var input_data={'account_type':account_types[0],'auth_token':String(response.credential),}
$.ajax({type:'POST',url:'/google-login/',data:JSON.stringify(input_data),dataType:'json',headers:{'X-CSRFTOKEN':csrftoken,"Content-type":"application/json"},success:function(data){setTimeout(function(){var url=String(new URL(window.location.href));if(url.includes('sign-up')){$('.user').removeClass('choose-account-type');$('.user').html('<div class="user google-acc__card border card" style="display:none">'+'<h4>Continue with Google</h4>'+'<div class="form__error small" role="alert">'+'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="red" class="bi bi-exclamation-circle-fill" viewBox="0 0 16 16">'+'<path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>'+'</svg>'+'<span class="error__content">'+'</span>'+'</div>'+'<div class="google-acc-details">'+'<img width="30" height="30" src="'+data['data'].picture+'" alt="'+data['data'].email+'" style="border-radius: 50%;">'+'<span class="google__username">'+data['data'].email+'</span>'+'</div>'+'<input type="hidden" name="first_name" value="'+data['data'].given_name+'">'+'<input type="hidden" name="last_name" value="'+data['data'].family_name+'">'+'<div class="choose-account-type">'+'<button class="plain-btn border user__type google-account__type" data-account-type="individual" type="button">'+'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">'+'<path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"></path>'+'</svg>'+'<h6>Individual User</h6>'+'</button>'+'<button class="plain-btn border user__type google-account__type" data-account-type="business" type="button">'+'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="bi bi-briefcase" viewBox="0 0 16 16">'+'<path d="M6.5 1A1.5 1.5 0 0 0 5 2.5V3H1.5A1.5 1.5 0 0 0 0 4.5v8A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-8A1.5 1.5 0 0 0 14.5 3H11v-.5A1.5 1.5 0 0 0 9.5 1h-3zm0 1h3a.5.5 0 0 1 .5.5V3H6v-.5a.5.5 0 0 1 .5-.5zm1.886 6.914L15 7.151V12.5a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5V7.15l6.614 1.764a1.5 1.5 0 0 0 .772 0zM1.5 4h13a.5.5 0 0 1 .5.5v1.616L8.129 7.948a.5.5 0 0 1-.258 0L1 6.116V4.5a.5.5 0 0 1 .5-.5z"></path>'+'</svg>'+'<h6>Business User</h6>'+'</button>'+'</div>'+'<div class="extra-fields"></div>'+'<div class="signup__agreement">'+'<div class="choice-input-wrapper ">'+'<input type="checkbox" name="agreement" class="form-check-input mt-0">'+'<label class="form-check-label small" for="">Yes, I understand and agree to the Upwork Terms of Service, including the User Agreement and Privacy Policy.</label>'+'</div>'+'</div>'+'<div id="signin">'+'<button class="btn button-black" id="googleAuthenticationBtn">Create account</button>'+'</div>'+'</div>');$('.google-acc__card').fadeIn('slow');}
else{handleGoogleLogin(data['data'].email)}},delay_by_in_ms);},error:function(xhr,ajaxOptions,thrownError){setTimeout(function(){var list_of_errors=xhr.responseJSON['error'];$('.form__error').fadeIn('slow');$('.form__error').addClass('active');for(let i=0;i<list_of_errors.length;i++){var newItem=list_of_errors[i];$(".error__content").html(newItem);}},delay_by_in_ms);setTimeout(function(){$('.form__error').fadeOut('slow');$('.form__error').removeClass('active');},10000);}});}
$(document).on('click','#googleAuthenticationBtn',function(event){event.preventDefault();if($('input[name="agreement"]').is(":checked")){var agreement=true}
else{var agreement=false}
var password=makePassword(25);var input_data={'account_type':$('.google-account__type.selected').data('account-type'),'first_name':$('input[name="first_name"]').val(),'last_name':$('input[name="last_name"]').val(),'company_name':$('input[name="company_name"]').val(),'username':$('input[name="username"]').val(),'email':$('.google__username').text(),'password1':password,'password2':password,'agreement':agreement,'provider':'Google'}
console.log(input_data);$('.button-black').html('<div class="lds-ring"><div></div><div></div><div></div><div></div></div>');$.ajax({type:'POST',url:'/sign-up/',data:JSON.stringify(input_data),dataType:'json',headers:{'X-CSRFTOKEN':csrftoken,"Content-type":"application/json"},success:function(data){setTimeout(function(){window.location.href='/';},delay_by_in_ms);},error:function(xhr,ajaxOptions,thrownError){setTimeout(function(){var list_of_errors=xhr.responseJSON['error'];$('.button-black').html('Create account');$('.form__error').fadeIn('slow');$('.form__error').addClass('active');for(let i=0;i<list_of_errors.length;i++){var newItem=list_of_errors[i];$(".error__content").html(newItem);}},delay_by_in_ms);setTimeout(function(){$('.form__error').fadeOut('slow');$('.form__error').removeClass('active');},10000);}});})
window.onload=function(){var url=String(new URL(window.location.href));if(url.includes('sign-up')||url.includes('login')){google.accounts.id.initialize({client_id:"86282417486-l5morm5n1a4pa39ftt9bllrdm9acfinv.apps.googleusercontent.com",callback:handleCredentialResponse});google.accounts.id.renderButton(document.getElementById("googlebtnDiv"),{theme:"outline",size:"large"});google.accounts.id.prompt();}}
$(document).on('click','.logout-btn',function(event){event.preventDefault();$(this).html('<div class="lds-ring"><div></div><div></div><div></div><div></div></div>');$.ajax({type:'POST',url:'/logout/',dataType:'json',headers:{'X-CSRFTOKEN':csrftoken,"Content-type":"application/json"},success:function(data){setTimeout(function(){localStorage.clear();window.location.href="";},delay_by_in_ms);},error:function(){setTimeout(function(){$('.logout-btn').html('<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16"><path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"></path></svg> Log out');$('.form__error').fadeIn('slow');$('.form__error').addClass('active');$(".error__content").html("Something went wrong");},delay_by_in_ms);setTimeout(function(){$('.form__error').fadeOut('slow');$('.form__error').removeClass('active');},10000);}});})
var isLast=function(word){return $(word).next().length>0?false:true;}
var getNext=function(word){return $(word).next();}
var getVisible=function(){return document.getElementsByClassName('is-visible');}
var getFirst=function(){var node=$('.words-wrapper').children().first();return node;}
var switchWords=function(current,next){$(current).removeClass('is-visible').addClass('is-hidden');$(next).removeClass('is-hidden').addClass('is-visible');}
var getStarted=function(){var first=getVisible();var next=getNext(first);if(next.length!==0){switchWords(first,next);}else{$(first).removeClass('is-visible').addClass('is-hidden');var newEl=getFirst();$(newEl).removeClass('is-hidden').addClass('is-visible');}}
var init=function(){setInterval(function(){getStarted()},3000);}
init();$(document).on('submit','.stripe-form',function(event){event.preventDefault();var $this=$(this);$('.stripe-btn').html('<div class="lds-ring" style="margin: 3px 12px;"><div></div><div></div><div></div><div></div></div>').addClass('disabled');$('.stripe-btn .lds-ring div').css({'border-color':'#fff transparent transparent transparent'});$('#checkout-button').html('<div class="lds-ring"><div></div><div></div><div></div><div></div></div>').addClass('disabled');$('.stripe-form .button-black').html('<div class="lds-ring"><div></div><div></div><div></div><div></div></div>').addClass('disabled');$.ajax({type:'POST',url:$(this).attr('action'),dataType:'json',headers:{'X-CSRFTOKEN':csrftoken,"Content-type":"application/json"},success:function(data){setTimeout(function(){window.location.href=data.checkout_session_url;},delay_by_in_ms);},error:function(xhr,ajaxOptions,thrownError){setTimeout(function(){$('.stripe-btn').removeClass('disabled').html('Pay with <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" fill="#fff" width="30"><path d="M492.4 220.8c-8.9 0-18.7 6.7-18.7 22.7h36.7c0-16-9.3-22.7-18-22.7zM375 223.4c-8.2 0-13.3 2.9-17 7l.2 52.8c3.5 3.7 8.5 6.7 16.8 6.7 13.1 0 21.9-14.3 21.9-33.4 0-18.6-9-33.2-21.9-33.1zM528 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM122.2 281.1c0 25.6-20.3 40.1-49.9 40.3-12.2 0-25.6-2.4-38.8-8.1v-33.9c12 6.4 27.1 11.3 38.9 11.3 7.9 0 13.6-2.1 13.6-8.7 0-17-54-10.6-54-49.9 0-25.2 19.2-40.2 48-40.2 11.8 0 23.5 1.8 35.3 6.5v33.4c-10.8-5.8-24.5-9.1-35.3-9.1-7.5 0-12.1 2.2-12.1 7.7 0 16 54.3 8.4 54.3 50.7zm68.8-56.6h-27V275c0 20.9 22.5 14.4 27 12.6v28.9c-4.7 2.6-13.3 4.7-24.9 4.7-21.1 0-36.9-15.5-36.9-36.5l.2-113.9 34.7-7.4v30.8H191zm74 2.4c-4.5-1.5-18.7-3.6-27.1 7.4v84.4h-35.5V194.2h30.7l2.2 10.5c8.3-15.3 24.9-12.2 29.6-10.5h.1zm44.1 91.8h-35.7V194.2h35.7zm0-142.9l-35.7 7.6v-28.9l35.7-7.6zm74.1 145.5c-12.4 0-20-5.3-25.1-9l-.1 40.2-35.5 7.5V194.2h31.3l1.8 8.8c4.9-4.5 13.9-11.1 27.8-11.1 24.9 0 48.4 22.5 48.4 63.8 0 45.1-23.2 65.5-48.6 65.6zm160.4-51.5h-69.5c1.6 16.6 13.8 21.5 27.6 21.5 14.1 0 25.2-3 34.9-7.9V312c-9.7 5.3-22.4 9.2-39.4 9.2-34.6 0-58.8-21.7-58.8-64.5 0-36.2 20.5-64.9 54.3-64.9 33.7 0 51.3 28.7 51.3 65.1 0 3.5-.3 10.9-.4 12.9z"></path></svg>');$('#checkout-button').html('CHECKOUT').removeClass('disabled');$('.stripe-form .button-black').html('Buy Now').removeClass('disabled');$('.form__error').fadeIn('slow');$('.form__error').addClass('active').css({'display':'flex','margin-top':'15px'});$(".error__content").html(xhr.responseJSON['err']);},delay_by_in_ms);setTimeout(function(){$('.form__error').fadeOut('slow');$('.form__error').removeClass('active');},10000);}});})
$(window).on('load',function(event){event.preventDefault();var url=new URL(window.location);if(url.href.includes('account-confirm-email')){var key=url.href.split('email/')[1];$.ajax({type:'POST',url:'/account-confirm-email/'+key,data:JSON.stringify({'key':key}),dataType:'json',headers:{'X-CSRFTOKEN':csrftoken,"Content-type":"application/json"},success:function(data){},error:function(xhr,ajaxOptions,thrownError){setTimeout(function(){$('.form__error').fadeIn('slow');$('.form__error').addClass('active').css({'display':'flex','margin-top':'15px'});$(".error__content").html("Something went wrong! Please contact us");},delay_by_in_ms);setTimeout(function(){$('.form__error').fadeOut('slow');$('.form__error').removeClass('active');},10000);}});}})
$(document).on('click','#resend-email',function(event){event.preventDefault();var $this=$(this);$this.html('<div class="lds-ring" style="justify-content: flex-start"><div></div><div></div><div></div><div></div></div>');$this.addClass('disabled');var email=$this.data('email');console.log(email);$.ajax({type:'POST',url:'/resend-verification-email/',data:JSON.stringify({'email':email}),dataType:'json',headers:{'X-CSRFTOKEN':csrftoken,"Content-type":"application/json"},success:function(data){setTimeout(function(){$this.remove();$('<span style="color: #1a971a">New link has been sent to your email address!</span>').insertAfter('legend');},delay_by_in_ms);},error:function(xhr,ajaxOptions,thrownError){$this.removeClass('disabled');$this.html('<a data-email="'+email+'" id="resend-email" style="text-decoration: underline; color: #3869d4;">resend link.</a>');setTimeout(function(){$('.form__error').fadeIn('slow');$('.form__error').addClass('active').css({'display':'flex','margin-top':'15px'});$(".error__content").html(xhr.responseJSON['err']);},delay_by_in_ms);setTimeout(function(){$('.form__error').fadeOut('slow');$('.form__error').removeClass('active');},10000);}});});$(document).on('click','.btn-next',function(event){event.preventDefault();var $this=$(this);var $href=$this.data('href');var $nextpageName=$this.data('next-page');var steps=document.querySelectorAll('.step');$this.html('<div class="lds-ring" style="margin: 6px 12px;height: 10px;"><div></div><div></div><div></div><div></div></div>');$('.lds-ring div').css({'width':'12px','height':'12px'});if($href){if(!$('.form__error.active').length){var url=new URL(window.location);url.searchParams.set('name',$href);if($nextpageName){url.searchParams.set('page',$nextpageName);}
window.history.pushState({},'',url);$("html, body").animate({scrollTop:0},"fast");}}
if($href){if(!$('.form__error.active').length){steps.forEach(function(item,index){if(item.dataset.step==$href){steps[index-1].classList.remove('active');steps[index-1].className+=" step-completed";item.classList.add('active')}});}}
if($this.is("#validatePersonalInfo")){validatePersonalInformation();}
else if($this.is("#validateElectricityBill")){validateElectricityBill();}
else if($this.is("#validateInstallationType")){validateInstallationType();}
else if($this.is("#validateRoofStyle")){validateRoofStyle();}
else if($this.is("#confirmSelectedPanel")){confirmSelectedPanel();}
else if($this.is("#confirmSelectedFitting")){confirmSelectedFitting();}
else if($this.is("#confirmSelectedInverter")){confirmSelectedInverter();}
else if($this.is("#validateCableLength")){validateCableLength();}
else if($this.is("#confirmInvBatteryLength")){confirmInvBatteryLength();}
else if($this.is("#confirmStorageCable")){confirmStorageCable();}
else if($this.is("#validateRoofDimensions")){validateRoofDimensions();}
setTimeout(function(){$('.form__error').fadeOut('slow');$('.form__error').removeClass('active');},10000);})
$(document).on("click",".skip-btn",function(){var $this=$(this);var $href=$this.data('href');var $nextpage=$this.data('skip');var $nextpageName=$this.data('next-page');var steps=document.querySelectorAll('.step');if($href){var url=new URL(window.location);url.searchParams.set('name',$href);url.searchParams.set('page',$nextpageName);window.history.pushState({},'',url);$("html, body").animate({scrollTop:0},"fast");}
if($href){if(!$('.form__error.active').length){steps.forEach(function(item,index){if(item.dataset.step==$href){steps[index-1].className+=" step-completed";item.classList.add('active')}});}}
var html="/static/quote_pages/"+$nextpage+".html"
$.get(html,function(html_string)
{$("#content").html(html_string);},'html');})
$(document).on("click",".btn-back",function(){var $this=$(this);var $href=$this.data('href');var $previouspage=$this.data('back');var url=new URL(window.location);var steps=document.querySelectorAll('.step');if($href){url.searchParams.set('name',$href);url.searchParams.set('page',$previouspage);window.history.pushState({},'',url);if(!$('.form__error.active').length){steps.forEach(function(item,index){if(item.dataset.step==$href){if(index!=0){steps[index-1].classList.remove('active');}
if(index!=5){steps[index+1].classList.remove('active');}
item.classList.add('active')}});}}
if(url.href.includes('section?name')&&(url.searchParams.get('page'))!='parts'&&(url.searchParams.get('page'))!='storage-system-size'&&(url.searchParams.get('page'))!='extra-help'){var html="/static/quote_pages/"+$previouspage+".html"
$.get(html,function(html_string)
{$("#content").html(html_string);},'html');}
else if(((url.searchParams.get('page'))=='storage-system-size')||((url.searchParams.get('page'))=='extra-help')){loadObjects();}
else if((url.searchParams.get('page'))=='parts'){loadProducts();}})
$(document).on('click','.choice-card, .product-choice',function(){$('.choice-card').removeClass('selected');$('.product-choice').removeClass('selected');$(this).addClass('selected');})
$(document).on('submit','.quote-sections form',function(e){e.preventDefault();})
$(document).on('click','#installation__type .choice-card',function(){var $this=$(this).find('.choice-text');var url=new URL(window.location);if($this.text()=='Roof'){url.searchParams.set('page',"single-phase");$.get("/static/quote_pages/single-phase.html",function(html_string)
{$("#content").html(html_string);},'html');}
else if($this.text()=='Standalone'){var url=new URL(window.location);url.searchParams.set('page',"standalone-installation");$.get("/static/quote_pages/standalone-installation.html",function(html_string)
{$("#content").html(html_string);},'html');}
window.history.pushState({},'',url);})
$(document).on('click','#standalone__installation .choice-card',function(){if($(this).find('.choice-text').text()=='Campervan'){$('#content').html('<div class="page-title-wrap text-center">'+'<h4 class="sub-title">Please see the campervan bundles in our shop</h4>'+'</div>'+'<div class="btn-group-footer">'+'<a data-back="standalone-installation" type="button" class="btn primary-btn btn-back">'+'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">'+'<path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"></path>'+'</svg>'+'Back'+'</a>'+'</div>');}
else{$('#content').html('<div class="page-title-wrap text-center">'+'<h4 class="sub-title">Please call us directly on 08000016802</h4>'+'<a href="{% url "shop" %}" type="button" class="btn button-black" style="width: 150px;margin: 2rem auto auto;">Shop</a>'+'</div>'+'<div class="btn-group-footer">'+'<a data-back="standalone-installation" type="button" class="btn primary-btn btn-back">'+'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">'+'<path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"></path>'+'</svg>'+'Back'+'</a>'+'</div>');}})
$(document).on('click','#singlePhase button',function(){var $this=$(this);if($this.text()=='No'){$('#content').html('<div class="page-title-wrap text-center">'+'<h4 class="sub-title">Please call us directly on 08000016802</h4>'+'</div>'+'<div class="btn-group-footer">'+'<a data-back="single-phase" type="button" class="btn primary-btn btn-back">'+'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">'+'<path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"></path>'+'</svg>'+'Back'+'</a>'+'</div>');$('.toolbar__section-middle .btn-next').html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');}
else{var url=new URL(window.location);url.searchParams.set('page',"spare-way");window.history.pushState({},'',url);$.get("/static/quote_pages/spare-way.html",function(html_string)
{$("#content").html(html_string);},'html');}})
$(document).on('click','#spareWay button',function(){var $this=$(this);var url=new URL(window.location);if($this.text()=='No'){$('#content').html('<div class="page-title-wrap text-center">'+'<h4 class="sub-title">Please call us directly on 08000016802</h4>'+'</div>'+'<div class="btn-group-footer">'+'<a data-back="single-phase" type="button" class="btn primary-btn btn-back">'+'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">'+'<path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"></path>'+'</svg>'+'Back'+'</a>'+'</div>');$('.toolbar__section-middle .btn-next').html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');}
else{url.searchParams.set('page',"roof-style");window.history.pushState({},'',url);$.get("/static/quote_pages/roof-style.html",function(html_string)
{$("#content").html(html_string);},'html');}})
$(document).on('click','#storageSystem button',function(){var $this=$(this);var url=new URL(window.location);if($this.text()=='Yes'){url.searchParams.set('page',"storage-system-size");window.history.pushState({},'',url);loadObjects();}
else{if(localStorage.getItem('storage_system')){localStorage.removeItem('storage_system');localStorage.removeItem('fattened_storage_cable_length');localStorage.removeItem('storagecableField');localStorage.removeItem('fattened_cable_length');localStorage.removeItem('cablelengthbtoinvField');}
url.searchParams.set('page',"extra-help");window.history.pushState({},'',url);loadObjects();}})
$(document).on('click','#extraRequiremet button',function(e){e.preventDefault();$('.prp-btn').click();})
$(document).on('click','#concludeQuote',function(e){e.preventDefault();$('.progress-section').remove();$('#content').html('<div class="text">'+'<h2>'+'<span class="words-wrapper">'+'<b class="is-visible">We are working on it, give us a minute...</b>'+'<b>Setting up stuff...</b>'+'<b>Getting things ready...</b>'+'<b>Almost done...</b>'+'</span>'+'<h2>'+'</div>')
if($(this).hasClass('primary-btn')){localStorage.setItem('extra_service',$(this).data('id'));}
var input_data={'full_name':localStorage.getItem("fullnameField"),'address':localStorage.getItem("addressField"),'postcode':localStorage.getItem("postcodeField"),'email':localStorage.getItem("emailField"),'property_type':localStorage.getItem("housetypeField"),'no_floors':localStorage.getItem("nofloorsField"),'no_bedrooms':localStorage.getItem("nobedroomsField"),'phone':localStorage.getItem("phoneField"),'bill_rate':localStorage.getItem("billrateField"),'roof_style':localStorage.getItem("roof_style"),'roof_width':localStorage.getItem("widthField"),'roof_height':localStorage.getItem("heightField"),'panels_count':localStorage.getItem("quantity"),'selected_panel':localStorage.getItem("panel_slug"),'fitting':localStorage.getItem("fitting_slug"),'inverter':localStorage.getItem("inverter_slug"),'cable_length_panel_cons':localStorage.getItem("fattened_consumer_cable_length"),'cable_length_bat_inv':localStorage.getItem("fattened_cable_length"),'storage_cable':localStorage.getItem("fattened_storage_cable_length"),'storage_system':localStorage.getItem("storage_system"),'extra_service':localStorage.getItem("extra_service"),}
$.post({type:'POST',url:'/build-quote/section',data:JSON.stringify(input_data),dataType:'json',headers:{'X-CSRFTOKEN':csrftoken,"Content-type":"application/json"},success:function(data){var redirect_url='/quote/'+data.redirect_url
console.log(redirect_url);setTimeout(function(){window.location.href=redirect_url;localStorage.removeItem('extra_service');},1000);},error:function(xhr,ajaxOptions,thrownError){console.log("not working");}});})
const quote_url='/upload-products/';const object_url='/upload-objects/';const content=$('#content');const delay_100_ms=100
const ajax_func=function(quote_url,request_parameters){$.getJSON(quote_url,request_parameters).done(response=>{setTimeout(function(){content.html(response['html_from_view']);},delay_100_ms);})}
const load_func=function(object_url,request_parameters){$.getJSON(object_url,request_parameters).done(response=>{setTimeout(function(){content.html(response['html_from_view']);},delay_100_ms);})}
function loadProducts(){var url=new URL(window.location);const request_parameters={"product_type":url.searchParams.get('name'),"slug":localStorage.getItem('panel_slug'),"roof_type":localStorage.getItem("roof_style"),}
$('#content').html('<div class="lds-ellipsis" style="display: flex;-webkit-box-pack: center;justify-content: center;margin: auto;"><div></div><div></div><div></div><div></div></div>');if(scheduled_function){clearTimeout(scheduled_function)}
scheduled_function=setTimeout(ajax_func,delay_100_ms,quote_url,request_parameters);}
function loadObjects(){var url=new URL(window.location);const request_parameters={"object_type":url.searchParams.get('page'),}
$('#content').html('<div class="lds-ellipsis" style="display: flex;-webkit-box-pack: center;justify-content: center;margin: auto;"><div></div><div></div><div></div><div></div></div>');if(scheduled_function){clearTimeout(scheduled_function)}
scheduled_function=setTimeout(load_func,delay_100_ms,object_url,request_parameters);}
$(document).on('click','.step.step-completed',function(e){e.preventDefault();var url=new URL(window.location);var $this=$(this);var $last_completed_step=$('.step.step-completed').last();$last_completed_step.next().removeClass('active');$last_completed_step.prevAll().removeClass('active');$this.nextAll('.step-completed').removeClass('active');$this.prevAll('.step').removeClass('active');$this.addClass('active');url.searchParams.set('name',$this.data('step'));url.searchParams.set('page',$this.data('page'));window.history.pushState({},'',url);updateCurrentSection();})
function updateCurrentSection(){var url=new URL(window.location);if(url.href.includes("build-quote")&&(!url.href.includes("page")||!url.href.includes("section?name"))){url.searchParams.set('name',"Personal Information");url.searchParams.set('page',"personal-information");window.history.pushState({},'',url);$('#content').html('<div class="lds-ellipsis" style="display: flex;-webkit-box-pack: center;justify-content: center;margin: auto;"><div></div><div></div><div></div><div></div></div>');setTimeout(function(){$.get("/static/quote_pages/personal-information.html",function(html_string)
{$('#content').html(html_string);},'html');},delay_by_in_ms);}
else if((url.searchParams.get('page'))=='summary'){$('.quote-builder-container').html('<div class="lds-ellipsis" style="display: flex;-webkit-box-pack: center;justify-content: center;margin: auto;"><div></div><div></div><div></div><div></div></div>');setTimeout(function(){$.get("/static/quote_pages/summary.html",function(html_string)
{$(".quote-builder-container").html(html_string);},'html');},delay_by_in_ms);}
else if((url.searchParams.get('page'))=='parts'){loadProducts();}
else if((url.searchParams.get('page'))=='storage-system-size'||(url.searchParams.get('page'))=='extra-help'){loadObjects();}
else if(url.href.includes('section?name')&&(url.searchParams.get('page'))!='parts'){$('#content').html('<div class="lds-ellipsis" style="display: flex;-webkit-box-pack: center;justify-content: center;margin: auto;"><div></div><div></div><div></div><div></div></div>');var html="/static/quote_pages/"+url.searchParams.get('page')+".html"
setTimeout(function(){$.get(html,function(html_string)
{$("#content").html(html_string);},'html');},delay_by_in_ms);}
else if((url.searchParams.get('page'))=='Summary'){$('#content').html('<div class="lds-ellipsis" style="display: flex;-webkit-box-pack: center;justify-content: center;margin: auto;"><div></div><div></div><div></div><div></div></div>');setTimeout(function(){$.get("/static/quote_pages/summary.html",function(html_string)
{$('.quote-builder').html(html_string);},'html');},delay_by_in_ms);}
var current_step=$('.step[data-step="'+url.searchParams.get('name')+'"');$(current_step).addClass('active');$(current_step).prevAll('.step').addClass('step-completed').removeClass('active');}
$(window).on('load popstate hashchange',function(){var url=new URL(window.location);if(url.href.includes('build-quote/section')){updateCurrentSection()}})
$(document).on("DOMSubtreeModified","#content",function(){var inputs=document.querySelectorAll('.section input');inputs.forEach(function(item,index){var saved_data=localStorage.getItem(item.id);if(saved_data){document.getElementById(item.id).value=saved_data;}});})
$(document).on("DOMNodeInserted",".card-list",function(){var productCards=document.querySelectorAll('.product-choice');productCards.forEach(function(item,index){var selected_panel=localStorage.getItem('panel_slug');var selected_fitting=localStorage.getItem('fitting_slug');var selected_inverter=localStorage.getItem('inverter_slug');if(item.dataset.slug==selected_panel||(item.dataset.slug==selected_fitting)||(item.dataset.slug==selected_inverter)){item.classList.add('selected');}})})
function displayError(){$('.form__error').fadeIn('slow');$('.form__error').css('display','flex');$('.form__error').addClass('active');}
function validateEmail($email){var emailReg=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;return emailReg.test($email);}
function validatePersonalInformation(){if(!$("#housetypeField").val()){displayError()
$('.error__content').html("Type of house: This field cannot be blank");$('.toolbar__section-middle .btn-next').html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');}
else if(!$("#nobedroomsField").val()){displayError()
$('.error__content').html("Number of bedrooms: This field cannot be blank");$('.toolbar__section-middle .btn-next').html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');}
else if(!$("#nofloorsField").val()){displayError()
$('.error__content').html("Number of floors: This field cannot be blank");$('.toolbar__section-middle .btn-next').html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');}
else if(!$("input[name='agreement']").is(':checked')){displayError()
$('.error__content').html("You must agree to Solar Panels Terms of Service, including the User Agreement and Privacy Policy.");$('.toolbar__section-middle .btn-next').html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');}
else if(!(validateEmail($('input[name="email"]').val()))){displayError()
$('.error__content').html("You have entered an invalid email address!");$('.toolbar__section-middle .btn-next').html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');}
else{var inputs=document.querySelectorAll('input');inputs.forEach(function(item,index){localStorage.setItem(item.id,item.value);});var url=new URL(window.location);url.searchParams.set('name','monthly-bill-rate');url.searchParams.set('page','bill-rate');window.history.pushState({},'',url);$.get("/static/quote_pages/bill-rate.html",function(html_string)
{$("#content").html(html_string);},'html');}}
function validateElectricityBill(){if(parseInt($("#billrateField").val())<=0){displayError()
$('.error__content').html("Amount cannot be less than or equal to 0 USD");$('.toolbar__section-middle .btn-next').html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');}
else{var input=document.getElementById('billrateField');localStorage.setItem(input.id,input.value);var url=new URL(window.location);url.searchParams.set('page',"installation-type");window.history.pushState({},'',url);$.get("/static/quote_pages/installation-type.html",function(html_string)
{$("#content").html(html_string);},'html');}}
function validateInstallationType(){if(!$('.choice-card.selected').length){displayError()
$('.error__content').html("You should choose one of the options");$('.toolbar__section-middle .btn-next').html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');}
else{var url=new URL(window.location);if($('.choice-card.selected .choice-text').text()=='Standalone'){url.searchParams.set('page',"single-phase");$.get("/static/quote_pages/standalone-installation.html",function(html_string)
{$("#content").html(html_string);},'html');}
else if($('.choice-card.selected .choice-text').text()=='Roof'){url.searchParams.set('page',"standalone-installation");var selected_choice=$('.choice-card.selected .choice-text').text();localStorage.setItem("installation_type",selected_choice);$.get("/static/quote_pages/single-phase.html",function(html_string)
{$("#content").html(html_string);},'html');}
window.history.pushState({},'',url);}}
function validateRoofStyle(){if(!$('.choice-card.selected').length){displayError()
$('.error__content').html("You should choose one of the options");$('.toolbar__section-middle .btn-next').html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');}
else{var selected_choice=$('.choice-card.selected .choice-text').text();localStorage.setItem("roof_style",selected_choice);var url=new URL(window.location);url.searchParams.set('page','roof-dimensions');window.history.pushState({},'',url);$.get("/static/quote_pages/roof-dimensions.html",function(html_string)
{$("#content").html(html_string);},'html');}}
function validateRoofDimensions(){if(!$("#widthField").val()){displayError();$('.error__content').html("This field cannot be blank");$('.toolbar__section-middle .btn-next').html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');}
else if(!$("#heightField").val()){displayError();$('.error__content').html("This field cannot be blank");$('.toolbar__section-middle .btn-next').html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');}
else if(parseInt($("#heightField").val())<=0){displayError();$('.error__content').html("Roof's height cannot be less than or equal to zero");$('.toolbar__section-middle .btn-next').html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');}
else if(parseInt($("#widthField").val())<=0){displayError();$('.error__content').html("Roof's width cannot be less than or equal to zero");$('.toolbar__section-middle .btn-next').html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');}
else{var inputs=document.querySelectorAll('input');inputs.forEach(function(item,index){localStorage.setItem(item.id,item.value);});var url=new URL(window.location);url.searchParams.set('name','Panel');url.searchParams.set('page','parts');window.history.pushState({},'',url);loadProducts();}}
$(document).on('change','#cablelengthField',function(){var $this=$(this);var input_val=$this.val();localStorage.setItem($this.attr('id'),input_val);var fattened_value=parseFloat(input_val)+parseFloat((input_val*0.2));localStorage.setItem("fattened_consumer_cable_length",fattened_value);})
function validateCableLength(){if(!$("#cablelengthField").val()){displayError()
$('.error__content').html("This field cannot be blank");$('.toolbar__section-middle .btn-next').html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');}
else if(parseInt($("#cablelengthField").val())<=0){displayError();$('.error__content').html("Invalid length value!");$('.toolbar__section-middle .btn-next').html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');}
else{var url=new URL(window.location);url.searchParams.set('name','Storage System');url.searchParams.set('page','storage-system');window.history.pushState({},'',url);$.get("/static/quote_pages/storage-system.html",function(html_string)
{$("#content").html(html_string);},'html');}}
function possibleMaxPanels(){var panel_height=Math.round(parseFloat($('#panel-height').text()));var panel_width=Math.round(parseFloat($('#panel-width').text()));var roof_width=Math.round(parseFloat(localStorage.getItem("widthField")));var roof_height=Math.round(parseFloat(localStorage.getItem("heightField")));var row=roof_height/panel_height;var column=roof_width/panel_width;return Math.round(row*column)}
function confirmSelectedPanel(){if($('input[name="panels_count"]').val()>$('.quantity-input').attr('max')){displayError()
$('.error__content').html("You cannot order more than the maximum quantity");}
else if($('input[name="panels_count"]').val()>possibleMaxPanels()){displayError()
$('.error__content').html("Based on your roof dimensions, max amount of panels you can order is "+possibleMaxPanels()+"");}
else{var slug=$('.product-choice.selected').data('slug');var quantity=$('.quantity-input').val();localStorage.setItem("panel_slug",slug);localStorage.setItem("quantity",quantity);var url=new URL(window.location);url.searchParams.set('name','Fitting');url.searchParams.set('page','parts');window.history.pushState({},'',url);loadProducts();}}
function confirmSelectedFitting(){var slug=$('.product-choice').data('slug');localStorage.setItem("fitting_slug",slug);var url=new URL(window.location);url.searchParams.set('name','Inverter');url.searchParams.set('page','parts');window.history.pushState({},'',url);loadProducts();}
$(document).on('click','#storageSystemSize button',function(){var $this=$(this);var url=new URL(window.location);url.searchParams.set('name',"Cable Length from Battery to Inverter");url.searchParams.set('page',"cable-length-battery-inverter");window.history.pushState({},'',url);localStorage.setItem('storage_system',$this.data('slug'));$.get("/static/quote_pages/cable-length-battery-inverter.html",function(html_string)
{$("#content").html(html_string);},'html');})
function confirmSelectedInverter(){if(!$('.product-choice.selected').length){displayError()
$('.error__content').html("You should choose an inverter");$('.toolbar__section-middle .btn-next').html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');}
else{var slug=$('.product-choice').data('slug');localStorage.setItem("inverter_slug",slug);var url=new URL(window.location);url.searchParams.set('page','Storage System');url.searchParams.set('page','cable-length');window.history.pushState({},'',url);$.get("/static/quote_pages/cable-length.html",function(html_string)
{$("#content").html(html_string);},'html');}}
$(document).on('change','#cablelengthbtoinvField',function(){var $this=$(this);var input_val=$this.val();localStorage.setItem($this.attr('id'),input_val);var fattened_value=parseFloat(input_val)+parseFloat((input_val*0.2));localStorage.setItem("fattened_cable_length",fattened_value);})
function confirmInvBatteryLength(){if(parseInt($("#cablelengthbtoinvField").val())<=0){displayError();$('.error__content').html("Invalid length value!");$('.toolbar__section-middle .btn-next').html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');}
else if(!($("#cablelengthbtoinvField").val()).length){displayError();$('.error__content').html("This field cannot be blank!");$('.toolbar__section-middle .btn-next').html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');}
else{var url=new URL(window.location);url.searchParams.set('page','storage-cable');window.history.pushState({},'',url);$.get("/static/quote_pages/storage-cable.html",function(html_string)
{$("#content").html(html_string);},'html');}}
function confirmStorageCable(){if(parseInt($("#storagecableField").val())<=0){displayError();$('.error__content').html("Invalid length value!");$('.toolbar__section-middle .btn-next').html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');}
else if(!$("#storagecableField").val().length){displayError();$('.error__content').html("This field cannot be blank");$('.toolbar__section-middle .btn-next').html('<svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-arrow-right-short" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"></path></svg>');}
else{var input=document.getElementById("storagecableField");localStorage.setItem(input.id,input.value);var fattened_value=parseFloat(input.value)+parseFloat(((input.value)*0.2));localStorage.setItem("fattened_storage_cable_length",fattened_value);var url=new URL(window.location);url.searchParams.set('page','extra-help');window.history.pushState({},'',url);loadObjects()}}
$(document).on('click','.quote-builder .modal-btn',function(e){e.preventDefault();var $this=$(this);var slug=$('.product-choice.selected').data('slug');$(this).html('<div class="lds-ring"><div></div><div></div><div></div><div></div></div>');$.ajax({type:'GET',url:'/variant-details/'+slug,dataType:'json',headers:{'X-CSRFTOKEN':csrftoken,"Content-type":"application/json"},success:function(response){$this.html('Choose Panel');$('.modal-window').css({'visibility':'visible','opacity':1,'pointer-events':'auto',});$('.modal-content').html('<div class="lds-ellipsis" style="display: flex;-webkit-box-pack: center;justify-content: center;margin: auto;"><div></div><div></div><div></div><div></div></div>');setTimeout(function(){$('.modal-content').html(response['html_from_view']);},delay_by_in_ms);},error:function(){$this.html('Choose Panel');}});})
$(document).on('click','.step-btn',function(){var $this=$(this);var tab_id=$this.data('tab');$('.step-btn').removeClass('active');$this.addClass('active');$('.section-content').hide();$('#'+tab_id).css('visibility','visible').show();})
$(document).on('click','#loadpreviousProducts',function(){loadProducts();});